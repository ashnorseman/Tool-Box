!function(a,b){var c=!1,d=1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(c=!0),b.isMobile=c,document.getElementsByTagName("html")[0].className+=c?" mobile":" no-mobile",b.devicePixelRatio&&(d=b.devicePixelRatio),b.dpr=d,document.cookie="dpr="+d+";path=/"}(navigator.userAgent||navigator.vendor||window.opera,window),$.fn.extend({center:function(a,b){return b=_.isPositive(b)?+b:0,a=_.isPositive(a)?+a:0,this.css({left:Math.max((document.documentElement.clientWidth-this.outerWidth())/2,b),top:Math.max((document.documentElement.clientHeight-this.outerHeight())/2,a)+$(window).scrollTop()})},hideLoading:function(){return this[0].posStatic&&(this[0].style.position="",delete this[0].posStatic),this.children(".loading").remove().end()},showLoading:function(){return"static"===this.css("position")&&(this.css("position","relative")[0].posStatic=!0),this.append('<div class="loading"></div>')},swapWith:function(a){var b=$(a),c=this.clone(!0),d=b.clone(!0);return b.replaceWith(c),this.replaceWith(d),c},coverPoint:function(a,b){var c=this.offset();return a>=c.left&&b>=c.top&&a<=c.left+this.outerWidth()&&b<=c.top+this.outerHeight()},isChildOf:function(a){var b=this[0].parentNode;a=$(a)[0];do{if(b===a)return!0;b=b.parentNode}while(b);return!1}}),$(function(a,b){var c=$(b);$.events={click:a.isMobile?"touchend":"click"},c.on($.events.click,function(a){$("[data-document-close]").each(function(b,c){a.target===c||$(a.target).isChildOf(c)||($(c).removeClass("opened"),$(c.getAttribute("data-document-close")).removeClass("opened"))})}),c.on("keyup","[data-enter]",function(a){13===a.which&&$(a.target.getAttribute("data-enter")).trigger("click")}),c.on("change","[data-select-all]",function(a){var b=a.target.checked;$('[name="'+a.target.getAttribute("data-select-all")+'"]').filter(b?":not(:checked)":":checked").prop("checked",b).trigger("change")}),c.on("change","[data-select]",function(a){"checkbox"===a.target.type&&$(a.target.getAttribute("data-select")).prop("checked",!$('[name="'+a.target.name+'"]:not(:checked)').length)}),c.on($.events.click,"[data-toggle]",function(a){var b=$(a.target).closest("[data-toggle]");$(b[0].getAttribute("data-toggle")).toggleClass(b[0].getAttribute("data-toggle-class")),a.stopPropagation()})}(window,document)),_.mixin({castArray:function(a){return _.isArray(a)?a:[a]},createArray:function(a,b){return _.map(_.range(a),function(){return b})},defaultsArray:function(a,b){return _.each(a,function(c,d){a[d]=_.defaults(c,b)})},moveIndex:function(a,b,c){var d,e;+c&&-1!==(d=_.indexOf(a,b))&&(e=Math.min(Math.max(+c+d,0),a.length-1),a.splice(d,1),a.splice(e,0,b))},dayStart:function(a){var b=new Date(a);return _.isValidDate(b)?new Date(b.getFullYear(),b.getMonth(),b.getDate()).valueOf():_.dayStart(new Date)},dayEnd:function(a){var b=new Date(a);return _.isValidDate(b)?new Date(b.getFullYear(),b.getMonth(),b.getDate()+1).valueOf()-1:_.dayEnd(new Date)},formatTime:function(a,b){var c,d=new Date(a);return _.exists(a)?_.isValidDate(d)?(b=_.isString(b)?b:"YYYY-MM-DD",c={YYYY:d.getFullYear(),YY:(""+d.getFullYear()).slice(-2),MM:_.pad(d.getMonth()+1),M:d.getMonth()+1,DD:_.pad(d.getDate()),D:d.getDate(),HH:_.pad(d.getHours()),H:d.getHours(),mm:_.pad(d.getMinutes()),m:d.getMinutes(),ss:_.pad(d.getSeconds()),s:d.getSeconds()},b.replace(/(YYYY)|(\bYY\b)|(MM)|(\bM\b)|(DD)|(\bD\b)|(HH)|(\bH\b)|(mm)|(\bm\b)|(ss)|(\bs\b)/g,function(a){return c[a]})):_.formatTime(new Date,b):""},exists:function(a){return!_.isNull(a)&&!_.isUndefined(a)},isNegative:function(a){return 0>a},isPositive:function(a){return a>0},isPureObject:function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)},isValidDate:function(a){return _.isDate(a)&&_.isFinite(a.valueOf())},notEmpty:function(a){return _.exists(a)&&""!==a},safeExtendOwn:function(a){var b,c,d,e,f,g,h=arguments.length;if(2>h||!_.exists(a))return a;for(b=1;h>b;b+=1)for(c=arguments[b],d=_.keys(c),e=d.length,f=0;e>f;f+=1)g=d[f],_.isUndefined(a[g])?a[g]=c[g]:_.error(['Key "',g,'" already exists.'].join(""));return a},snapshot:function(a){return _.exists(a)&&"object"==typeof a?_.reduce(_.keys(a),function(b,c){return b[c]=_.snapshot(a[c]),b},new a.constructor):a},capitalize:function(a,b){return a=_.exists(a)?""+a:"",a.charAt(0).toLocaleUpperCase()+(b?a.substring(1).toLocaleLowerCase():a.substring(1))},error:function(){window.console&&window.console.log.apply?window.console.info.apply(console,arguments):window.console&&window.console.info(arguments[0])},"int":function(a){return parseInt(a,10)},formatNumber:function(a,b){var c="-"===(a+"").slice(0,1)?"-":"";return _.isNaN(+a)?"":(b&&(a=(+a).toFixed(b)),a=(a+"").replace("-","").split("."),result=_.reduceRight(a[0],function(b,c,d){return((a[0].length-d)%3||!d?"":",")+c+b},""),_.isUndefined(a[1])||(result+=".",result+=_.reduce(a[1],function(b,c,d){return b+c+(d%3===2&&d!==a[1].length-1?",":"")},"")),c+result)},log:function(){window.console&&window.console.log.apply?window.console.log.apply(console,arguments):window.console&&window.console.log(arguments[0])},num:function(a){return _.isFinite(a)?+a:a},pad:function(a,b,c,d){var e;return a=_.exists(a)?""+a:"",b=_.isFinite(b)?Math.abs(Math.floor(b)):2,c=_.exists(c)&&(""+c).length>0?(""+c).charAt(0):"0",d=!!d,(e=b-a.length)<=0?a:d?a+new Array(e+1).join(c):new Array(e+1).join(c)+a},parseNumber:function(a){return+a.replace(/,/g,"")},parseQuery:function(a){var b=_.isString(a)?a.slice(1):"";return b.length?_.reduce(b.split("&"),function(a,b){return a[b.split("=")[0]]=b.split("=")[1],a},{}):{}}}),function(a){var b={},c="";a.addLang=function(c){a.each(c,function(c,d){b[d]||(b[d]={}),a.safeExtendOwn(b[d],c)})},a.hasLang=function(c){return a.exists(b[c])},a.parseLocale=function(a){return b[c]?b[c][a]||"":""},a.setLang=function(b){a.hasLang(b)?c=b:a.error("Language code does not exist.")}}(_),function(a,b,c){var d,e,f,g,h=["get","set"],i=["add","remove","reset","create","set","get"],j=["initialize","render","remove","sort"],k=a.extend,l=/\b_super\b/;d=function(a){var b,c,d,e=k.apply(this,arguments);for(b in a)a.hasOwnProperty(b)&&(c=a[b],d=this.prototype[b],_.isPureObject(c)&&_.isPureObject(d)?e.prototype[b]=_.extend({},d,c):_.isFunction(c)&&l.test(c)&&(e.prototype[b]=function(a,b){return function(){var c,d=this._super;return this._super=b,c=a.apply(this,arguments),this._super=d,c}}(c,d)));return e},e=Backbone.ItemView=function(){this.dataShortcut(h),c.apply(this,arguments),this.listenToDataEvents(_.result(this,"modelEvents")),this.listenToViewEvents(j),this.listenToViewEvents(_.result(this,"viewEvents")),this.model&&(this.model.view=this),this.trigger("initialize")},_.extend(e.prototype,c.prototype,{template:"",render:function(){return this._initTemplate(),this.$el.html(this.template(this.model?this.model.toJSON():null)),this._makeUiShortcuts(),this.trigger("render"),this},remove:function(){return this.trigger("remove"),c.prototype.remove.apply(this,arguments)},linkView:function(a,b){return b||(b={}),this[b.anotherName||"child"]=a,a[b.thisName||"parent"]=this,b.holder&&a.$el.appendTo(this.$(b.holder)),this.listenToDataEvents(b.modelEventsListening,a.model),this.listenToViewEvents(b.viewEventsListening,a),a.listenToDataEvents(b.modelEventsListened,this.model),a.listenToViewEvents(b.viewEventsListened,this),this},listenToDataEvents:function(a,b,c){var d,e;if(c=c||"model",!b&&!(b=this[c])||!a)return this;for(d in a)if(a.hasOwnProperty(d)){if(!_.isFunction(e=a[d])&&!_.isFunction(e=this[e]))return;this.listenTo(b,d,e)}return this},listenToViewEvents:function(a,b){var c,d,e;if(!a)return this;if(_.isArray(a))_.each(a,function(a){d="on"+_.capitalize(a),_.isFunction(c=this[d])&&this.on(a,c)},this);else for(e in a)if(a.hasOwnProperty(e)){if(!_.isFunction(c=a[e])&&!_.isFunction(c=this[c]))return;b?this.listenTo(b,e,c):this.on(e,c)}return this},dataShortcut:function(a,b){return b||(b="model"),_.each(a,function(a){this[a]=function(){return this[b]?this[b][a].apply(this[b],arguments):void 0}},this),this},_initTemplate:function(){_.isFunction(this.template)||(this.template=_.template(this.template))},_makeUiShortcuts:function(){var a,b,c=this.ui;if(c)for(a in c)c.hasOwnProperty(a)&&((b=this.$(c[a])).length?c[a]=b:delete c[a])}}),f=Backbone.CollectionView=d.call(e,{initialize:function(a){this.initializing=!0,a||(a={}),this.sortable&&this._initSort(),this.collection=new this.constructor.prototype.collection(a.collection),this.dataShortcut(i,"collection"),this.listenToDataEvents({add:"addChild",remove:"removeChild",reset:"resetChild"},this.collection),this.resetChild(),this.initializing=!1},render:function(){return this.$el.empty(),this.renderChildren(this.children),this.trigger("render"),this},renderChildren:function(a){return a=_.castArray(a),_.each(a,function(a){this.$el.append(a.render().$el)},this),this},_initSort:function(){var a=this.childView.prototype;return this.$el.sortable({items:"> *",stop:_.bind(this._triggerSort,this)}),_.extend(a.events=a.events||{},{sort:this._sort}),this},_triggerSort:function(a,b){var c=$(b.item),d=c.parent().children().index(c);c.trigger("sort",[d,this])},_sort:function(a,b,c){c.children.splice(b,1,this),c.collection.models.splice(b,1,this.model),c.trigger("sort",this,b)},addChild:function(a){var b=new this.childView({model:a});return b.parent=this,this.children.push(b),this.resetting||(this.renderChildren(b),_.isFunction(this.onAdd)&&this.onAdd.apply(this,arguments)),this},removeChild:function(a){return this.children=_.without(this.children,a.view),a.view.remove(),_.isFunction(this.onRemove)&&this.onRemove.apply(this,arguments),this},resetChild:function(){return this.resetting=!0,this.children=[],this.collection.each(function(a){this.addChild(a)},this),this.initializing||(this.render(),_.isFunction(this.onReset)&&this.onReset()),this.resetting=!1,this}}),f.extend=e.extend=c.extend=a.extend=d,g=Backbone.Module=function m(b){return this instanceof m?(b||(b={}),b=_.safeExtendOwn({events:b.domEvents},b,b.domApi,b.modelApi,b.viewApi),delete b.domEvents,delete b.domApi,delete b.modelApi,delete b.viewApi,this.Model=a.extend(_.safeExtendOwn({url:b.url,urlRoot:b.urlRoot,defaults:b.dataDefaults},b.dataHandlers)),delete b.dataDefaults,delete b.dataHandlers,delete b.url,delete b.urlRoot,void(this.View=e.extend(b))):new m(b)},_.extend(g.prototype,{create:function(a){return new this.View(_.extend({model:new this.Model(a)},a))}}),ListModule=Backbone.ListModule=function(c){return this instanceof ListModule?(c||(c={}),this.Model=a.extend(_.safeExtendOwn({defaults:c.dataDefaults},c.dataHandlers)),delete c.dataDefaults,delete c.dataHandlers,this.Collection=b.extend({url:c.url,model:this.Model}),delete c.url,this.ChildView=g(c.itemSettings).View,delete c.itemSettings,c=_.safeExtendOwn({childView:this.ChildView,collection:this.Collection,events:c.domEvents},c,c.domApi,c.modelApi,c.viewApi),delete c.domEvents,delete c.domApi,delete c.modelApi,delete c.viewApi,void(this.View=f.extend(c))):new ListModule(c)},_.extend(ListModule.prototype,{create:function(a){return new this.View({collection:a})}})}(Backbone.Model,Backbone.Collection,Backbone.View);