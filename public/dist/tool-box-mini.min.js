!function(a,b){var c=!1,d=1;(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(a)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(a.substr(0,4)))&&(c=!0),b.isMobile=c,document.getElementsByTagName("html")[0].className+=c?" mobile":" no-mobile",b.devicePixelRatio&&(d=b.devicePixelRatio),b.dpr=d,document.cookie="dpr="+d+";path=/"}(navigator.userAgent||navigator.vendor||window.opera,window),$.fn.extend({center:function(a,b){return b=_.isPositive(b)?+b:0,a=_.isPositive(a)?+a:0,this.css({left:Math.max((document.documentElement.clientWidth-this.outerWidth())/2,b),top:Math.max((document.documentElement.clientHeight-this.outerHeight())/2,a)+$(window).scrollTop()})},hideLoading:function(){return this[0].posStatic&&(this[0].style.position="",delete this[0].posStatic),this.children(".loading").remove().end()},showLoading:function(){return"static"===this.css("position")&&(this.css("position","relative")[0].posStatic=!0),this.append('<div class="loading"></div>')},swapWith:function(a){var b=$(a),c=this.clone(!0),d=b.clone(!0);return b.replaceWith(c),this.replaceWith(d),c},coverPoint:function(a,b){var c=this.offset();return a>=c.left&&b>=c.top&&a<=c.left+this.outerWidth()&&b<=c.top+this.outerHeight()},isChildOf:function(a){var b=this[0].parentNode;a=$(a)[0];do{if(b===a)return!0;b=b.parentNode}while(b);return!1}}),$(function(a,b){var c=$(b);$.events={click:a.isMobile?"touchend":"click"},c.on($.events.click,function(a){$("[data-document-close]").each(function(b,c){a.target===c||$(a.target).isChildOf(c)||($(c).removeClass("opened"),$(c.getAttribute("data-document-close")).removeClass("opened"))})}),c.on("keypress","[data-enter]",function(a){13===a.which&&$(a.target.getAttribute("data-enter")).trigger($.events.click)}),c.on("keyup",function(a){var b=a.target.tagName.toUpperCase();"INPUT"!==b&&"TEXTAREA"!==b&&$("[data-accesskey="+a.which+"]").trigger($.events.click)}),c.on("change","[data-select-all]",function(a){var b=a.target.checked;$('[name="'+a.target.getAttribute("data-select-all")+'"]').filter(b?":not(:checked)":":checked").prop("checked",b).trigger("change")}),c.on("change","[data-select]",function(a){"checkbox"===a.target.type&&$(a.target.getAttribute("data-select")).prop("checked",!$('[name="'+a.target.name+'"]:not(:checked)').length)}),c.on($.events.click,"[data-toggle]",function(a){var b=$(a.target).closest("[data-toggle]");$(b[0].getAttribute("data-toggle")).toggleClass(b[0].getAttribute("data-toggle-class")),a.stopPropagation()})}(window,document)),_.mixin({castArray:function(a){return _.isArray(a)?a:[a]},createArray:function(a,b){return _.map(_.range(a),function(){return b})},defaultsArray:function(a,b){return _.each(a,function(c,d){a[d]=_.defaults(c,b)})},moveIndex:function(a,b,c){var d,e;+c&&-1!==(d=_.indexOf(a,b))&&(e=Math.min(Math.max(+c+d,0),a.length-1),a.splice(d,1),a.splice(e,0,b))},dayStart:function(a){var b=new Date(a);return _.isValidDate(b)?new Date(b.getFullYear(),b.getMonth(),b.getDate()).valueOf():_.dayStart(new Date)},dayEnd:function(a){var b=new Date(a);return _.isValidDate(b)?new Date(b.getFullYear(),b.getMonth(),b.getDate()+1).valueOf()-1:_.dayEnd(new Date)},formatTime:function(a,b){var c,d=new Date(a);return _.exists(a)?_.isValidDate(d)?(b=_.isString(b)?b:"YYYY-MM-DD",c={YYYY:d.getFullYear(),YY:(""+d.getFullYear()).slice(-2),MM:_.pad(d.getMonth()+1),M:d.getMonth()+1,DD:_.pad(d.getDate()),D:d.getDate(),HH:_.pad(d.getHours()),H:d.getHours(),mm:_.pad(d.getMinutes()),m:d.getMinutes(),ss:_.pad(d.getSeconds()),s:d.getSeconds()},b.replace(/(YYYY)|(\bYY\b)|(MM)|(\bM\b)|(DD)|(\bD\b)|(HH)|(\bH\b)|(mm)|(\bm\b)|(ss)|(\bs\b)/g,function(a){return c[a]})):_.formatTime(new Date,b):""},exists:function(a){return!_.isNull(a)&&!_.isUndefined(a)},isNegative:function(a){return 0>a},isPositive:function(a){return a>0},isPureObject:function(a){return a&&"[object Object]"===Object.prototype.toString.call(a)},isValidDate:function(a){return _.isDate(a)&&_.isFinite(a.valueOf())},notEmpty:function(a){return _.exists(a)&&""!==a},safeExtendOwn:function(a){var b,c,d,e,f,g,h=arguments.length;if(2>h||!_.exists(a))return a;for(b=1;h>b;b+=1)for(c=arguments[b],d=_.keys(c),e=d.length,f=0;e>f;f+=1)g=d[f],_.isUndefined(a[g])?a[g]=c[g]:_.error(['Key "',g,'" already exists.'].join(""));return a},snapshot:function(a){return _.exists(a)&&"object"==typeof a?_.reduce(_.keys(a),function(b,c){return b[c]=_.snapshot(a[c]),b},new a.constructor):a},capitalize:function(a,b){return a=_.exists(a)?""+a:"",a.charAt(0).toLocaleUpperCase()+(b?a.substring(1).toLocaleLowerCase():a.substring(1))},error:function(){window.console&&window.console.log.apply?window.console.info.apply(console,arguments):window.console&&window.console.info(arguments[0])},"int":function(a){return parseInt(a,10)},formatNumber:function(a,b){var c="-"===(a+"").slice(0,1)?"-":"";return _.isNaN(+a)?"":(b&&(a=(+a).toFixed(b)),a=(a+"").replace("-","").split("."),result=_.reduceRight(a[0],function(b,c,d){return((a[0].length-d)%3||!d?"":",")+c+b},""),_.isUndefined(a[1])||(result+=".",result+=_.reduce(a[1],function(b,c,d){return b+c+(d%3===2&&d!==a[1].length-1?",":"")},"")),c+result)},log:function(){window.console&&window.console.log.apply?window.console.log.apply(console,arguments):window.console&&window.console.log(arguments[0])},num:function(a){return _.isFinite(a)?+a:a},pad:function(a,b,c,d){var e;return a=_.exists(a)?""+a:"",b=_.isFinite(b)?Math.abs(Math.floor(b)):2,c=_.exists(c)&&(""+c).length>0?(""+c).charAt(0):"0",d=!!d,(e=b-a.length)<=0?a:d?a+new Array(e+1).join(c):new Array(e+1).join(c)+a},parseNumber:function(a){return+a.replace(/,/g,"")},parseQuery:function(a){var b=_.isString(a)?a.slice(1):"";return b.length?_.reduce(b.split("&"),function(a,b){return a[b.split("=")[0]]=b.split("=")[1],a},{}):{}}}),function(a){var b={},c="";a.addLang=function(c){a.each(c,function(c,d){b[d]||(b[d]={}),a.safeExtendOwn(b[d],c)})},a.hasLang=function(c){return a.exists(b[c])},a.parseLocale=function(a){return b[c]?b[c][a]||"":""},a.setLang=function(b){a.hasLang(b)?c=b:a.error("Language code does not exist.")}}(_),$(function(a,b){function c(a,b,c,d){var f,g;d?(f=a.getAttribute("data-"+b),g=_.extend({},e.Types.custom[b],{data:f})):(f=a.getAttribute(b),g=_.extend({},e.Types.html5[b],{data:f})),_.exists(f)&&c.push(g)}function d(a){return $(a).closest("form").find("[name="+a.name+"]:checked")}function e(a){var b=a.input,c=a.predict,d=this;b&&(_.isFunction(c)&&(a.predict=function(){var a=$(b).val();return _.isString(a)&&(a=$.trim(b.value)),c.call(b,a,d)}),_.extend(this,a))}var f=$(b);e.Types={html5:{required:{type:"required",errorMsg:"请输入必填项",predict:function(a,b){var c=b.input.type;return"checkbox"===c||"radio"===c?b.input.checked:""!==a}},min:{type:"min",errorMsg:"您输入的数字不得小于 <%= data %>",predict:function(a,b){return _.isString(a)?+a>=+b.data:(a||(a=[]),a.length>=+b.data)}},max:{type:"max",errorMsg:"您输入的数字不得大于 <%= data %>",predict:function(a,b){return _.isString(a)?+a<=+b.data:(a||(a=[]),a.length<=+b.data)}},minLength:{type:"minLength",errorMsg:"您输入的文字长度不得小于 <%= data %>",predict:function(a,b){return a.length>=+b.data}},maxLength:{type:"maxLength",errorMsg:"您输入的文字长度不得大于 <%= data %>",predict:function(a,b){return a.length<=+b.data}},pattern:{type:"pattern",errorMsg:"您输入的内容格式不正确",predict:function(a,b){return new RegExp(b.data).test(a)}}},custom:{format:{type:"format",errorMsg:'请输入正确格式的<%= { email: "电子邮件", number: "数字" }[data] %>',predict:function(a,b){var c;switch(b.data){case"email":c=/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i;break;case"number":c=/^[-+]?[0-9]*\.?[0-9]+$/;break;default:c=/./}return new RegExp(c).test(a)}},minimum:{type:"minimum",errorMsg:"请至少选择 <%= data %> 项",predict:function(a,b){return d(b.input).length>=+b.data}},maximum:{type:"maximum",errorMsg:"请最多选择 <%= data %> 项",predict:function(a,b){return d(b.input).length<=+b.data}}}},e.prototype.invalidMessage=function(){return _.template(this.errorMsg)({data:this.data})},$.form={addCustomValidation:function(a){var b=a.type,c=a.predict;_.isString(b)&&_.isFunction(c)&&(e.Types.custom[b]||(e.Types.custom[b]={type:b,predict:c}))}},$.fn.extend({addValidation:function(a){var b=this[0];return a=_.castArray(a),b.validation||(b.validation={}),_.each(a,function(a){a.type&&(a.input=b,b.validation[a.type]=new e(a))}),this},isValid:function(){var a,b={};return"FORM"===this[0].tagName.toUpperCase()?(a=_.reduce(this.find(":enabled:not(:button)"),function(a,c){var d=$(c)._validate();return d&&(b[c.name]=d),!d&&a},!0),this[0].validationError=b,a?this.trigger("valid"):this.trigger("invalid",b),a):!this._validate()},_validate:function(){var a,b=this[0],c=this.val(),d={};return this._collectValidation(),_.isEmpty(b.validation)?null:b.validation.required||!_.isEmpty(c)&&c.length?(_.each(b.validation,function(a,b){a.predict()||(d[b]=a)}),b.validationError=d,a=_.isEmpty(d),a?this.trigger("valid"):this.trigger("invalid",d),a?null:d):(b.validationError=d,null)},_collectValidation:function(){var a=this[0],b=[];return _.each(e.Types.html5,function(d){c(a,d.type,b,!1)}),_.each(e.Types.custom,function(d){c(a,d.type,b,!0)}),this.addValidation(b)},getVal:function(a){var b,c=this.find("[name="+a+"]"),d=c[0].type;switch(d){case"checkbox":return 1===c.length?c[0].checked:(b=_.map(c.filter(":checked"),function(a){return a.value}),b.length?b:null);case"radio":return b=c.filter(":checked").val(),void 0===b?null:b;default:return c.val()}},setVal:function(a,b,c){var d,e=this.find("[name="+a+"]"),f=e[0].type,g=c&&c.validate;switch(f){case"checkbox":if(1===e.length){e[0].checked=b;break}b=_.castArray(b),e.each(function(){this.checked=function(a,b){for(var c=a.length;c--;)if(b.value+""==a[c]+"")return!0;return!1}(b,this)});break;case"radio":d=_.find(e,function(a){return a.value+""==b+""}),d&&(d.checked=!0);break;default:e.val(b)}return g&&e._validate(),this},clear:function(){var a;return"FORM"===this[0].tagName.toUpperCase()?(this.find(":input:not(:button)").each(function(){$(this).clear()}),this.trigger("clear")):(a=this[0].type,"checkbox"===a||"radio"===a?this[0].checked=!1:this.val(null),this[0].validationError=null,this.removeClass("form-valid form-invalid").parent().removeClass("has-valid has-invalid"),this.trigger("clear")),this},getFormData:function(a){var b=a?$(a):this.closest("form"),c={};return b.find(":input:not(:button)").each(function(a,d){var e;if(_.notEmpty(d.name)&&_.notEmpty(e=$(d).val()))switch(d.type){case"checkbox":if(1===b.find("[name="+d.name+"]").length){c[d.name]=d.checked;break}c[d.name]||(c[d.name]=[]),d.checked&&c[d.name].push(e);break;case"radio":d.checked&&(c[d.name]=e);break;default:c[d.name]=e}}),c},submit:function(a,b){var c=this.closest("form");return c.isValid()?(_.isString(a)?b||(b={}):(b=_.isObject(a)?a:{},a=b.url||c.attr("action")),b.method||(b.method=c.attr("method")||"post"),b.data||(b.data={}),_.extend(b.data,c.getFormData()),$.ajax(a,b)):this}}),f.on("valid invalid",":enabled",function(a,b){var c,d,e=$(a.target),f=e.parent();e.removeClass("form-valid form-invalid").addClass("form-"+a.type),f.removeClass("has-valid has-invalid").addClass("has-"+a.type),"invalid"===a.type?(d=_.map(_.keys(b),function(a){return b[a].invalidMessage()}).join("<br>"),(c=f.children(".form-error-text")).length?c.html(d):f.append('<p class="form-error-text">'+d+"</p>")):f.children(".form-error-text").remove(),a.stopPropagation()}),f.on("keypress","input, select",function(a){var b,c;13===a.which&&(b=$(a.target).closest("form"),b.length&&(c=b.data("submit")?$(b.data("submit")):b.find("[data-action=submit]"),c.length&&c.trigger($.events.click)),a.preventDefault())})}(window,document));